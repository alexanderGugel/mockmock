<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Mockmock by alexanderGugel</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Mockmock</h1>
      <h2 class="project-tagline">A Mocking Library for Minimalists</h2>
      <a href="https://github.com/alexanderGugel/mockmock" class="btn">View on GitHub</a>
      <a href="https://github.com/alexanderGugel/mockmock/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/alexanderGugel/mockmock/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="mockmock" class="anchor" href="#mockmock" aria-hidden="true"><span class="octicon octicon-link"></span></a>mockmock</h1>

<p><a href="https://travis-ci.org/alexanderGugel/mockmock"><img src="https://travis-ci.org/alexanderGugel/mockmock.svg" alt="Build Status"></a>
<a href="https://npmjs.org/package/mockmock"><img src="https://img.shields.io/npm/v/mockmock.svg?style=flat" alt="npm"></a>
<a href="http://standardjs.com/"><img src="https://img.shields.io/badge/code%20style-standard-brightgreen.svg?style=flat" alt="js-standard-style"></a></p>

<p>Mocking library for minimalists and people that don't want to remember 500 different methods.</p>

<p><img src="https://farm8.staticflickr.com/7201/6825992286_1762072c7b_b.jpg" alt="Curiout Chicken"></p>

<h2>
<a id="why" class="anchor" href="#why" aria-hidden="true"><span class="octicon octicon-link"></span></a>Why?</h2>

<p>I like <a href="http://sinonjs.org/docs/">sinon</a>, but I am not a big fan of forcing users to remember the difference between stubs, spies and mocks. There is no need for a ton of different methods. <code>mockmock</code> is a much simpler approach that offers a sufficient solution for the majority of use-cases.</p>

<h2>
<a id="example" class="anchor" href="#example" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h2>

<p><code>mockmock</code> exports a single function <code>mock</code>.
<code>mock</code> accepts the function to be mocked or a constant value to be returned:</p>

<div class="highlight highlight-source-js"><pre><span class="pl-k">var</span> mocked <span class="pl-k">=</span> mock(<span class="pl-k">function</span> (<span class="pl-smi">color</span>, <span class="pl-smi">fruit</span>) {
  <span class="pl-en">console</span>.<span class="pl-c1">log</span>(<span class="pl-s"><span class="pl-pds">'</span>A<span class="pl-pds">'</span></span>, color, fruit)
})

mocked(<span class="pl-s"><span class="pl-pds">'</span>red<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>apple<span class="pl-pds">'</span></span>) <span class="pl-c">// #=&gt; A red apple</span>
mocked(<span class="pl-s"><span class="pl-pds">'</span>yellow<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>banana<span class="pl-pds">'</span></span>) <span class="pl-c">// #=&gt; A yellow banana</span>
mocked(<span class="pl-s"><span class="pl-pds">'</span>green<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>cucumber<span class="pl-pds">'</span></span>) <span class="pl-c">// #=&gt; A green cucumber</span></pre></div>

<div class="highlight highlight-source-js"><pre><span class="pl-k">var</span> mocked <span class="pl-k">=</span> mock(<span class="pl-c1">123</span>)

<span class="pl-en">console</span>.<span class="pl-c1">log</span>(mocked()) <span class="pl-c">// #=&gt; 123</span></pre></div>

<p>Apart from defining behavior, the mock function is also a "spy", which means you can access its arguments, thisArg etc.:</p>

<div class="highlight highlight-source-js"><pre><span class="pl-k">var</span> mocked <span class="pl-k">=</span> mock()

mocked(<span class="pl-c1">1</span>, <span class="pl-c1">2</span>, <span class="pl-c1">3</span>)
<span class="pl-en">console</span>.<span class="pl-c1">log</span>(mocked.args) <span class="pl-c">// #=&gt; [[1, 2, 3]]</span>

mocked(<span class="pl-c1">4</span>, <span class="pl-c1">5</span>, <span class="pl-c1">6</span>)
<span class="pl-en">console</span>.<span class="pl-c1">log</span>(mocked.args) <span class="pl-c">// #=&gt; [[1, 2, 3], [4, 5, 6]]</span>

mocked.<span class="pl-c1">apply</span>({}, [])
<span class="pl-en">console</span>.<span class="pl-c1">log</span>(mocked.thisValues) <span class="pl-c">// #=&gt; [this, this, {}]</span></pre></div>

<h2>
<a id="install" class="anchor" href="#install" aria-hidden="true"><span class="octicon octicon-link"></span></a>Install</h2>

<p>With <a href="https://www.npmjs.com/package/mockmock">npm</a> do:</p>

<pre><code>npm i mockmock -S
</code></pre>

<p><code>mockmock</code> can then be <code>require</code>d as follows:</p>

<div class="highlight highlight-source-js"><pre><span class="pl-k">var</span> mock <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>mockmock<span class="pl-pds">'</span></span>)</pre></div>

<p>or:</p>

<div class="highlight highlight-source-js"><pre><span class="pl-k">var</span> mock <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>mockmock<span class="pl-pds">'</span></span>).mock</pre></div>

<h2>
<a id="api" class="anchor" href="#api" aria-hidden="true"><span class="octicon octicon-link"></span></a>API</h2>

<p>If you are familiar with <a href="http://sinonjs.org/docs/">sinon</a>, a lot of the methods might look familiar to you.</p>

<h3>
<a id="mock--mockedfn" class="anchor" href="#mock--mockedfn" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>mock()</code> #=&gt; <code>mockedFn</code>
</h3>

<p>Either accepts a constant value to be returned using an identity function or a function to be mocked. If no argument is provided, a noop function will be used.</p>

<div class="highlight highlight-source-js"><pre><span class="pl-k">var</span> mockedIdentityFn <span class="pl-k">=</span> mock(<span class="pl-s"><span class="pl-pds">'</span>123<span class="pl-pds">'</span></span>)
<span class="pl-en">console</span>.<span class="pl-c1">log</span>(mockedIdentityFn()) <span class="pl-c">// #=&gt; '123'</span>

<span class="pl-k">var</span> mockedFn <span class="pl-k">=</span> mock(<span class="pl-k">function</span> () {
  <span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">'</span>hello<span class="pl-pds">'</span></span>
})
<span class="pl-en">console</span>.<span class="pl-c1">log</span>(mockedFn()) <span class="pl-c">// #=&gt; 'hello'</span>

<span class="pl-k">var</span> mockedNoop <span class="pl-k">=</span> mocke()
<span class="pl-en">console</span>.<span class="pl-c1">log</span>(mockedNoop()) <span class="pl-c">// #=&gt; undefined</span></pre></div>

<h3>
<a id="args" class="anchor" href="#args" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>args</code>
</h3>

<p>An array of recorded <code>arguments</code>. <code>arguments</code> will be converted to an actual array to allow easy usage of <code>deepEqual</code> methods.</p>

<div class="highlight highlight-source-js"><pre><span class="pl-k">var</span> mocked <span class="pl-k">=</span> mock(<span class="pl-k">function</span> () {})
mocked(<span class="pl-c1">1</span>, <span class="pl-c1">2</span>, <span class="pl-c1">3</span>)
mocked(<span class="pl-c1">4</span>, <span class="pl-c1">5</span>, <span class="pl-c1">6</span>)
<span class="pl-en">console</span>.<span class="pl-c1">log</span>(mocked.args) <span class="pl-c">// #=&gt; [[1, 2, 3], [4, 5, 6]]</span></pre></div>

<h3>
<a id="thisvalues" class="anchor" href="#thisvalues" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>thisValues</code>
</h3>

<p>Similar to <code>args</code>, records the <code>thisValue</code> the mocked function has been called with.</p>

<div class="highlight highlight-source-js"><pre><span class="pl-k">var</span> mocked <span class="pl-k">=</span> mock(<span class="pl-k">function</span> () {})
mocked.<span class="pl-c1">call</span>({ a<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>a<span class="pl-pds">'</span></span> })
mocked.<span class="pl-c1">call</span>({ b<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>b<span class="pl-pds">'</span></span> })
<span class="pl-en">console</span>.<span class="pl-c1">log</span>(mocked.thisValues) <span class="pl-c">// #=&gt; [{ a: 'a' }, { b: 'b' }]</span></pre></div>

<h3>
<a id="returnvalues" class="anchor" href="#returnvalues" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>returnValues</code>
</h3>

<p>Similar to <code>args</code>, records the return values of the mocked function.</p>

<div class="highlight highlight-source-js"><pre><span class="pl-k">var</span> i <span class="pl-k">=</span> <span class="pl-c1">0</span>
<span class="pl-k">var</span> mocked <span class="pl-k">=</span> mock(<span class="pl-k">function</span> () {
  <span class="pl-k">return</span> i<span class="pl-k">++</span>
})
mocked()
mocked()
mocked()
<span class="pl-en">console</span>.<span class="pl-c1">log</span>(mocked.returnValues) <span class="pl-c">// #=&gt; [0, 1, 2]</span></pre></div>

<h3>
<a id="calls" class="anchor" href="#calls" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>calls</code>
</h3>

<p>Keeps track of <strong>when</strong> (unix timestamp) the mocked function has been called.</p>

<div class="highlight highlight-source-js"><pre><span class="pl-k">var</span> mocked <span class="pl-k">=</span> mock()
mocked()
mocked()
mocked()
<span class="pl-en">console</span>.<span class="pl-c1">log</span>(mocked.calls) <span class="pl-c">// #=&gt; [1445386361361, 1445386361365, 1445386361369]</span></pre></div>

<h3>
<a id="errors" class="anchor" href="#errors" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>errors</code>
</h3>

<p>Records the errors thrown by the function that has been mocked. Note that thrown errors <strong>will be passed through</strong> the mock function.</p>

<div class="highlight highlight-source-js"><pre><span class="pl-k">var</span> error <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">Error</span>()
<span class="pl-k">var</span> mocked <span class="pl-k">=</span> mock(<span class="pl-k">function</span> () { throws error })
<span class="pl-k">try</span> { mocked() } <span class="pl-k">catch</span> (e) {}
<span class="pl-en">console</span>.<span class="pl-c1">log</span>(mocked.errors) <span class="pl-c">// #=&gt; [error]</span></pre></div>

<h3>
<a id="callcount" class="anchor" href="#callcount" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>callCount</code>
</h3>

<p>How many times has the mocked function been called?</p>

<div class="highlight highlight-source-js"><pre><span class="pl-k">var</span> mocked <span class="pl-k">=</span> mock()
mocked()
mocked()
mocked()
<span class="pl-en">console</span>.<span class="pl-c1">log</span>(mocked.callCount) <span class="pl-c">// #=&gt; 3</span></pre></div>

<h3>
<a id="called" class="anchor" href="#called" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>called</code>
</h3>

<p>If the mocked function has been called <strong>at all</strong>.</p>

<div class="highlight highlight-source-js"><pre><span class="pl-k">var</span> mocked <span class="pl-k">=</span> mock()
<span class="pl-en">console</span>.<span class="pl-c1">log</span>(mocked.called) <span class="pl-c">// #=&gt; false</span>
mocked()
<span class="pl-en">console</span>.<span class="pl-c1">log</span>(mocked.called) <span class="pl-c">// #=&gt; true</span></pre></div>

<h3>
<a id="calledonce" class="anchor" href="#calledonce" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>calledOnce</code>
</h3>

<h3>
<a id="calledtwice" class="anchor" href="#calledtwice" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>calledTwice</code>
</h3>

<h3>
<a id="calledthrice" class="anchor" href="#calledthrice" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>calledThrice</code>
</h3>

<p>If the mocked function has been called <strong>exactly</strong> once, twice or three times.</p>

<div class="highlight highlight-source-js"><pre><span class="pl-k">var</span> mocked <span class="pl-k">=</span> mock()
<span class="pl-en">console</span>.<span class="pl-c1">log</span>(mocked.calledOnce) <span class="pl-c">// #=&gt; false</span>
mocked()
<span class="pl-en">console</span>.<span class="pl-c1">log</span>(mocked.calledOnce) <span class="pl-c">// #=&gt; true</span>
mocked()
<span class="pl-en">console</span>.<span class="pl-c1">log</span>(mocked.calledOnce) <span class="pl-c">// #=&gt; false</span>
<span class="pl-en">console</span>.<span class="pl-c1">log</span>(mocked.calledTwice) <span class="pl-c">// #=&gt; true</span></pre></div>

<h3>
<a id="firstcall" class="anchor" href="#firstcall" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>firstCall</code>
</h3>

<h3>
<a id="secondcall" class="anchor" href="#secondcall" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>secondCall</code>
</h3>

<h3>
<a id="thirdcall" class="anchor" href="#thirdcall" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>thirdCall</code>
</h3>

<h3>
<a id="lastcall" class="anchor" href="#lastcall" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>lastCall</code>
</h3>

<p>Returns an object describing the first, second, third or last call.</p>

<div class="highlight highlight-source-js"><pre><span class="pl-k">var</span> mocked <span class="pl-k">=</span> mock(<span class="pl-s"><span class="pl-pds">'</span>hello world<span class="pl-pds">'</span></span>)
mocked(<span class="pl-c1">1</span>, <span class="pl-c1">2</span>, <span class="pl-c1">3</span>)
<span class="pl-en">console</span>.<span class="pl-c1">log</span>(mocked.firstCall) <span class="pl-c">// #=&gt; { thisValue: this, args: [1, 2, 3], returnValue: 'hello world', error: undefined }</span></pre></div>

<h3>
<a id="clear-flush-reset" class="anchor" href="#clear-flush-reset" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>clear</code>, <code>flush</code>, <code>reset</code>
</h3>

<p>Resets the internal spy. All recorded arguments, errors, return values etc. will be reset.</p>

<div class="highlight highlight-source-js"><pre><span class="pl-k">var</span> mocked <span class="pl-k">=</span> mock()
mocked()
<span class="pl-en">console</span>.<span class="pl-c1">log</span>(mocked.called) <span class="pl-c">// #=&gt; true</span>
mocked.<span class="pl-c1">clear</span>()
<span class="pl-en">console</span>.<span class="pl-c1">log</span>(mocked.called) <span class="pl-c">// #=&gt; false</span></pre></div>

<h3>
<a id="mockfn" class="anchor" href="#mockfn" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>mockFn</code>
</h3>

<p>The function that is being mocked. Identity function of the passed in value when a constant value has been supplied.</p>

<div class="highlight highlight-source-js"><pre><span class="pl-k">var</span> <span class="pl-en">fn</span> <span class="pl-k">=</span> <span class="pl-k">function</span> () {}
<span class="pl-k">var</span> mocked <span class="pl-k">=</span> mock(fn)
<span class="pl-en">console</span>.<span class="pl-c1">log</span>(mocked.mockFn, fn) <span class="pl-c">// #=&gt; true</span></pre></div>

<h3>
<a id="mockvalue" class="anchor" href="#mockvalue" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>mockValue</code>
</h3>

<p>Equivalent of <code>mockFn</code> for mocked identities. References the supplied constant value (if any).</p>

<div class="highlight highlight-source-js"><pre><span class="pl-k">var</span> c <span class="pl-k">=</span> <span class="pl-c1">123</span>
<span class="pl-k">var</span> mocked <span class="pl-k">=</span> mock(c)
<span class="pl-en">console</span>.<span class="pl-c1">log</span>(mocked.mockValue, c) <span class="pl-c">// #=&gt; true</span></pre></div>

<p><em>For more usage examples, have a look at the test suite.</em></p>

<h2>
<a id="credits" class="anchor" href="#credits" aria-hidden="true"><span class="octicon octicon-link"></span></a>Credits</h2>

<ul>
<li>"Curious Chicken" image by <a href="https://flic.kr/p/bpbZGb">Ian Southwell</a>, licensed under <a href="https://creativecommons.org/licenses/by-nc-nd/2.0/">CC BY-NC-ND 2.0</a>
</li>
</ul>

<h2>
<a id="license" class="anchor" href="#license" aria-hidden="true"><span class="octicon octicon-link"></span></a>License</h2>

<p>ISC</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/alexanderGugel/mockmock">Mockmock</a> is maintained by <a href="https://github.com/alexanderGugel">alexanderGugel</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

            <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-53303016-2");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>
